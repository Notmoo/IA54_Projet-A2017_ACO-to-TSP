package com.utbm.ia54.aco.Agent

import io.sarl.core.Initialize
import io.sarl.core.Destroy
import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Lifecycle
import io.sarl.core.Logging
import com.utbm.ia54.aco.TSPPathFinder
import com.utbm.ia54.aco.AntCreated
import com.utbm.ia54.aco.SimpleTSPPathFinder
import com.utbm.ia54.aco.BottleneckTSPPathFinder

import com.utbm.ia54.aco.ChangeTspVersion

//-----------------------------------------
//		AGENTS
//-----------------------------------------
agent AntAgent{
	uses DefaultContextInteractions, TSPPathFinder, Lifecycle, Logging
	
	on Initialize {
		if (!occurrence.parameters.isEmpty) {
			var numAnt = occurrence.parameters.get(0) as Integer
			loggingName = "Ant_" + numAnt.toString
		}
		
		// TODO ajouter un else pour le cas o√π l'init est mal faite
		
		new SimpleTSPPathFinder().setSkill(TSPPathFinder)
		new AntCreated().emit
	}
	
	on Destroy {
		
	}
	
	on ApplicationClose{
		killMe
	}
	
	on ChangeTspVersion {
		if (occurrence.version_nb === 0) {
			new SimpleTSPPathFinder().setSkill(TSPPathFinder)
		}
		if (occurrence.version_nb === 1) {
			new BottleneckTSPPathFinder().setSkill(TSPPathFinder)
		}
	}
}
