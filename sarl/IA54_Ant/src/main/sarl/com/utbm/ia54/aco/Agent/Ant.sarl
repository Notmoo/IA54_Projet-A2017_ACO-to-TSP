package com.utbm.ia54.aco.Agent

import io.sarl.core.Initialize
import io.sarl.core.Destroy
import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Lifecycle
import io.sarl.core.Logging
import com.utbm.ia54.aco.AntCreated
import io.sarl.core.Behaviors
import com.utbm.ia54.aco.ClassicTSPWorker
import com.utbm.ia54.aco.TWTSPWorker

//-----------------------------------------
//		AGENTS
//-----------------------------------------
agent AntAgent{
	uses DefaultContextInteractions, Lifecycle, Logging, Behaviors
	
	var currTspVersionNb : int
	
	on Initialize {
		if (!occurrence.parameters.isEmpty) {
			var numAnt = occurrence.parameters.get(0) as Integer
			loggingName = "Ant_" + numAnt.toString
			
			if(occurrence.parameters.size>1)
				currTspVersionNb = occurrence.parameters.get(1) as Integer
			else
				currTspVersionNb = 0
				
			switch (currTspVersionNb){
				case 2: new TWTSPWorker(this).registerBehavior
				default: new ClassicTSPWorker(this).registerBehavior
			}
			new AntCreated().emit
		}else{
			killMe
		}
	}
	
	on Destroy {
		
	}
	
	on ApplicationClose {
		killMe
	}
}
